(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product_detaill/product_detaill"],{"09c1":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("swiper",{staticClass:"swiper",attrs:{"indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3}},t._l(t.productDetail.imgList,function(e,s){return i("swiper-item",{key:s,attrs:{mpcomid:"3d279f8a-0-"+s}},[i("image",{attrs:{src:t.imgURl+e,mode:""}})])})),i("view",{staticClass:"tishi"},[t._v("温馨提示！下单前请联系商家确认是否有货！"),i("text",{staticStyle:{color:"#000000","margin-left":"50rpx"}},[t._v("库存"+t._s(t.productDetail.sellCount))])]),i("view",{staticClass:"msg"},[i("view",{staticClass:"title"},[i("text",[t._v(t._s(t.productDetail.productName))]),0==t.isLike?i("image",{attrs:{src:"../../static/home/like1.png",mode:"",eventid:"3d279f8a-1"},on:{click:function(e){t.AddCollection(t.productDetail.productId)}}}):i("image",{attrs:{src:"../../static/home/like2.png",mode:"",eventid:"3d279f8a-0"},on:{click:function(e){t.AddCollection(t.productDetail.productId)}}})]),i("view",{staticClass:"info"},[t._v(t._s(t.productDetail.descript))]),i("view",{staticClass:"price"},[t._v("￥"+t._s(t.currentPrice?t.currentPrice:t.productDetail.price)+"元/"+t._s(t.productDetail.specUnit))]),i("navigator",{staticClass:"address",attrs:{url:"/pages/addressList/addressList"}},[i("text",[t._v("送至")]),t.address.addressId?i("text",[t._v(t._s(t.address.province)+"-"+t._s(t.address.city)+"-"+t._s(t.address.area)+t._s(t.address.addressLine1))]):i("text",[t._v("添加收货地址")]),i("image",{attrs:{src:"../../static/home/gengduo_41.png",mode:""}})])],1),i("view",{staticClass:"liubai"}),i("view",{staticClass:"guige",attrs:{eventid:"3d279f8a-2"},on:{click:t.isShowguige}},[i("text",[t._v("规格")]),i("text",[t._v(t._s(t.guige?t.guige+"X"+t.buy_count:"请选择规格"))]),i("image",{attrs:{src:"../../static/home/gengduo_41.png",mode:""}})]),i("view",{staticClass:"liubai"}),i("view",{staticClass:"comment"},[i("view",{staticClass:"title"},[i("text",[t._v("用户评价("+t._s(t.size)+")")]),i("text",{attrs:{eventid:"3d279f8a-3"},on:{click:function(e){t.gotoComment(t.productDetail.productId)}}},[t._v("查看全部>")])]),t.commentList.length>0?i("view",{staticClass:"item"},[i("image",{staticClass:"h_img",attrs:{src:t.imgURl+t.commentList[0].userPhoto,mode:""}}),i("text",[t._v(t._s(t.commentList[0].nickName))]),t._l(t.commentList[0].commentStar,function(t,e){return i("image",{key:e,staticClass:"x_img",attrs:{src:"../../static/home/wujiaoxing_03.png",mode:""}})})],2):t._e()]),i("view",{staticClass:"liubai"}),t._m(0),i("view",{staticClass:"img_list"},t._l(t.productDetail.imgList,function(e,s){return i("image",{key:s,attrs:{src:t.imgURl+e,mode:""}})})),i("view",{staticClass:"bottom"},[i("image",{attrs:{src:"../../static/home/weixin_07.png",mode:"",eventid:"3d279f8a-4"},on:{click:function(e){t.copy(t.productDetail.weChatId)}}}),i("image",{attrs:{src:"../../static/home/dianhua_06.png",mode:"",eventid:"3d279f8a-5"},on:{click:function(e){t.callUp(t.productDetail.phone)}}}),i("text",{attrs:{eventid:"3d279f8a-6"},on:{click:function(e){t.addCart()}}},[t._v("加入购物车")]),i("text",{attrs:{eventid:"3d279f8a-7"},on:{click:t.gotoPay}},[t._v("立即下单")])]),t.showGuige?i("view",{staticClass:"bottomWindow"},[i("view",{staticClass:"content"},[i("view",{staticClass:"head"},[i("image",{attrs:{src:t.imgURl+t.productDetail.imgList[0],mode:""}}),i("view",{staticClass:"msg"},[i("text",[t._v("￥"+t._s(t.currentPrice?t.currentPrice:t.productDetail.price)+"元/"+t._s(t.productDetail.specUnit))]),i("text",[t._v("已选择"+t._s(t.guige))])])]),i("text",[t._v("规格")]),i("view",{staticClass:"guige2"},t._l(t.productDetail.specList,function(e,s){return i("text",{key:s,class:{active:t.guigeTabs==s},attrs:{eventid:"3d279f8a-8-"+s},on:{click:function(i){t.guigeChange(e.productSpecs,s,e.specId,e.price)}}},[t._v(t._s(e.productSpecs))])})),i("view",{staticClass:"shuliang"},[i("text",[t._v("选数量")]),i("view",{staticClass:"list-cont"},[i("text",{staticClass:"sub",attrs:{eventid:"3d279f8a-9"},on:{click:t.sub}},[t._v("-")]),i("text",{staticClass:"sub"},[t._v(t._s(t.buy_count))]),i("text",{staticClass:"add",attrs:{eventid:"3d279f8a-10"},on:{click:t.add}},[t._v("+")])])]),i("view",{staticClass:"btn",attrs:{eventid:"3d279f8a-11"},on:{click:function(e){t.isOK()}}},[t._v("完成")])])]):t._e()],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"product_title"},[i("text",[t._v("热门店铺")])])}];i.d(e,"a",function(){return s}),i.d(e,"b",function(){return a})},"41cf":function(t,e,i){"use strict";i.r(e);var s=i("09c1"),a=i("784e");for(var c in a)"default"!==c&&function(t){i.d(e,t,function(){return a[t]})}(c);i("fd39");var d=i("2877"),o=Object(d["a"])(a["default"],s["a"],s["b"],!1,null,"601df5ba",null);e["default"]=o.exports},"784e":function(t,e,i){"use strict";i.r(e);var s=i("b018"),a=i.n(s);for(var c in s)"default"!==c&&function(t){i.d(e,t,function(){return s[t]})}(c);e["default"]=a.a},b018:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("cb97"),a=i("d931"),c=i("d737"),d=i("2f62");function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){r(t,e,i[e])})}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n={data:function(){return{size:0,currentPrice:"",isLike:0,guigeTabs:"-1",guige:"",specId:"",imgURl:"",showGuige:!1,buy_count:1,productDetail:{productId:"",imgList:[],specList:[]},address:{addressId:""},commentList:[{userPhoto:"",nickName:"",commentStar:""}]}},computed:o({},(0,d.mapState)(["userId"])),onLoad:function(t){this.imgURl=s.imgURl,this.productDetail.productId=t.id,this.getProductById(this.productDetail.productId,this.userId),this.addVisitRecord(),this.getCommentList(this.productDetail.productId,1,10),this.getUserAddressListByUserId(this.userId)},onShow:function(){this.getUserAddressListByUserId(this.userId)},methods:{AddCollection:function(e){var i="";0==this.isLike?(this.isLike=1,i=1):(this.isLike=0,i=0);var s={userId:this.userId,productId:e,dataFailure:i};(0,a.AddCollection)(s).then(function(e){0==e.data.code&&t.showToast({title:e.data.data,duration:2e3})})},getCommentList:function(t,e,i){var s=this;(0,a.getCommentList)(t,e,i).then(function(t){0==t.data.code&&(s.commentList=t.data.data.list,s.size=t.data.data.size)})},guigeChange:function(t,e,i,s){this.guige=t,this.currentPrice=s,this.guigeTabs=e,this.specId=i},getUserAddressListByUserId:function(t){var e=this;(0,c.getUserAddressListByUserId)(t).then(function(t){if(0==t.data.code){var i=!0,s=!1,a=void 0;try{for(var c,d=t.data.data[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var o=c.value;o.isDefault?e.address=o:e.address=t.data.data[0]}}catch(r){s=!0,a=r}finally{try{i||null==d.return||d.return()}finally{if(s)throw a}}}})},addVisitRecord:function(){var t={userId:this.userId,productId:this.productDetail.productId,visitType:0};(0,a.addVisitRecord)(t).then(function(t){})},getProductById:function(t,e){var i=this;(0,a.getProductById)(t,e).then(function(t){0==t.data.code&&(console.log(222),i.productDetail=t.data.data,i.isLike=t.data.data.isCollection)})},isShowguige:function(){this.showGuige=!0},isOK:function(){this.showGuige=!1},callUp:function(e){t.makePhoneCall({phoneNumber:e})},copy:function(e){t.setClipboardData({data:e,success:function(){t.showToast({title:"复制成功",duration:2e3})}})},addCart:function(){if(""!=this.specId)if(""!=this.address.addressId)if(this.productDetail.sellCount<1)t.showModal({title:"",content:"库存不足",showCancel:!1});else{var e={addressId:this.address.addressId,userId:this.userId,productId:this.productDetail.productId,specId:this.specId,productNum:this.buy_count};(0,a.addShopCart)(e).then(function(e){0==e.data.code&&t.showToast({title:"加入购物车成功",duration:2e3})})}else t.showModal({title:"",content:"请添加收货地址",showCancel:!1});else t.showModal({title:"",content:"请选择商品规格",showCancel:!1})},sub:function(){1!=this.buy_count&&this.buy_count--},add:function(){this.buy_count++},inputBuycount:function(){},gotoPay:function(){if(""!=this.specId)if(""!=this.address.addressId)if(this.productDetail.sellCount<1)t.showModal({title:"",content:"库存不足",showCancel:!1});else{var e=[],i={img:this.productDetail.imgList[0],expressId:this.productDetail.expressId,specUnit:this.productDetail.specUnit,shopId:this.productDetail.shopId,productId:this.productDetail.productId,specId:this.specId,productName:this.productDetail.productName,productPrice:this.productDetail.price,productCount:this.buy_count,prescriptionPrice:this.productDetail.price*this.buy_count};e.push(i);for(var s=[],c=0;c<e.length;c++){var d=e[c],o={img:d.img,expressId:d.expressId,shopId:d.shopId,productId:d.productId,specId:d.specId,productName:d.productName,productPrice:d.productPrice,productCount:d.productCount,prescriptionPrice:d.prescriptionPrice,orderRemark:"",addressId:this.address.addressId};s.push(o)}var r={userId:this.userId,orderDetailList:s};(0,a.addOrder)(r).then(function(e){0==e.data.code?t.navigateTo({url:"/pages/confirmOrder/confirmOrder?params="+JSON.stringify(i)+"&orderList="+e.data.data.orderIdList[0]}):t.showToast({title:"生成订单失败",icon:"none",duration:1e3})})}else t.showModal({title:"",content:"请添加收货地址",showCancel:!1});else t.showModal({title:"",content:"请选择商品规格",showCancel:!1})},gotoComment:function(e){t.navigateTo({url:"/pages/commentList/commentList?id="+e})}}};e.default=n}).call(this,i("6e42")["default"])},d697:function(t,e,i){},df32:function(t,e,i){"use strict";i("971c");var s=c(i("b0ce")),a=c(i("41cf"));function c(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},fd39:function(t,e,i){"use strict";var s=i("d697"),a=i.n(s);a.a}},[["df32","common/runtime","common/vendor"]]]);