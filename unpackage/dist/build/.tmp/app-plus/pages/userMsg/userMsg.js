(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/userMsg/userMsg"],{"1d53":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a("cb97"),s=a("2f62"),i=a("d737");function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){o(e,t,a[t])})}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={data:function(){return{imglist:"",userinfo:{name:"请输入用户名",userPhone:"请输入电话号码",userSex:"",nickName:"请输入用户昵称",spec_name:"请输入个性签名"},imgurl:"",range:["男","女"]}},onLoad:function(){this.imgurl=n.imgURl,this.getUserById()},methods:{getUserById:function(){var e=this;(0,i.getUserById)(this.userId).then(function(t){e.imglist=t.data.data.userPhoto,e.userinfo.name=t.data.data.userName,e.userinfo.userPhone=t.data.data.userPhone,e.userinfo.spec_name=t.data.data.specName,e.userinfo.userSex=t.data.data.userSex,e.userinfo.nickName=t.data.data.nickName})},nameChange:function(){var t={userId:this.userId,userName:this.userinfo.name};(0,i.updUserName)(t).then(function(t){0==t.data.code&&e.showToast({title:t.data.data,duration:2e3})})},nickNameChange:function(){var t={userId:this.userId,nickName:this.userinfo.nickName};(0,i.updUserNikeName)(t).then(function(t){0==t.data.code&&e.showToast({title:t.data.data,duration:2e3})})},userPhoneChange:function(){var t=/^[1][3,4,5,7,8][0-9]{9}$/;if(t.test(this.userinfo.userPhone)){var a={userId:this.userId,phone:this.userinfo.userPhone};(0,i.updUserPhone)(a).then(function(t){0==t.data.code&&e.showToast({title:t.data.data,duration:2e3})})}else e.showModal({title:"",content:"请输入正确的手机号码",showCancel:!1})},specnameChange:function(){var t={userId:this.userId,specName:this.userinfo.spec_name};(0,i.updUserSpecName)(t).then(function(t){0==t.data.code&&e.showToast({title:"修改个性签名成功",duration:2e3})})},bindPickerChange:function(e){this.userinfo.userSex=e.detail.value;var t={userId:this.userId,userSex:this.userinfo.userSex};(0,i.updUserSex)(t).then(function(e){})},paizhao:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(a){console.log(a),t.imglist=a.tempFilePaths[0],e.uploadFile({url:n.baseURL+"/file/upload",filePath:a.tempFilePaths[0],name:"file",formData:{user:"test",file:a.tempFilePaths[0]},success:function(a){var n=JSON.parse(a.data),s={userId:t.userId,userPhoto:n.data};(0,i.updUserPhoto)(s).then(function(t){0==t.data.code&&e.showToast({title:t.data.data,mask:!1,duration:1500})})}})}})}},computed:r({},(0,s.mapState)(["userId"]))};t.default=u}).call(this,a("6e42")["default"])},"707e":function(e,t,a){"use strict";a.r(t);var n=a("1d53"),s=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,function(){return n[e]})}(i);t["default"]=s.a},8197:function(e,t,a){"use strict";a.r(t);var n=a("fc20"),s=a("707e");for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);a("862b");var r=a("2877"),o=Object(r["a"])(s["default"],n["a"],n["b"],!1,null,"53436051",null);t["default"]=o.exports},"862b":function(e,t,a){"use strict";var n=a("da7d"),s=a.n(n);s.a},aba1:function(e,t,a){"use strict";a("971c");var n=i(a("b0ce")),s=i(a("8197"));function i(e){return e&&e.__esModule?e:{default:e}}Page((0,n.default)(s.default))},da7d:function(e,t,a){},fc20:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("view",{staticClass:"content"},[a("view",{staticClass:"item3"},[a("text",[e._v("头像")]),a("view",{staticClass:"right",attrs:{eventid:"71d77020-0"},on:{click:e.paizhao}},[e.imglist?a("image",{staticClass:"tx",attrs:{src:e.imgurl+e.imglist,mode:""}}):a("image",{staticClass:"tx",attrs:{src:"../../static/home/touxiang_03.png",mode:""}}),a("image",{staticClass:"bq",attrs:{src:"../../static/home/gengduo_41.png",mode:""}})])]),a("view",{staticClass:"item"},[a("text",[e._v("用户名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.name,expression:"userinfo.name"}],attrs:{type:"text",placeholder:e.userinfo.name,eventid:"71d77020-1"},domProps:{value:e.userinfo.name},on:{blur:function(t){e.nameChange()},input:function(t){t.target.composing||(e.userinfo.name=t.target.value)}}})]),a("view",{staticClass:"item"},[a("text",[e._v("昵称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.nickName,expression:"userinfo.nickName"}],attrs:{type:"text",value:"",placeholder:e.userinfo.nickName,eventid:"71d77020-2"},domProps:{value:e.userinfo.nickName},on:{blur:function(t){e.nickNameChange()},input:function(t){t.target.composing||(e.userinfo.nickName=t.target.value)}}})]),a("view",{staticClass:"item"},[a("text",[e._v("电话")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.userPhone,expression:"userinfo.userPhone"}],attrs:{type:"text",value:"",placeholder:e.userinfo.userPhone,eventid:"71d77020-3"},domProps:{value:e.userinfo.userPhone},on:{blur:function(t){e.userPhoneChange()},input:function(t){t.target.composing||(e.userinfo.userPhone=t.target.value)}}})]),a("picker",{attrs:{mode:"selector",range:e.range,eventid:"71d77020-4"},on:{change:e.bindPickerChange}},[a("view",{staticClass:"item3"},[a("text",[e._v("性别")]),a("text",[e._v(e._s(0==e.userinfo.userSex?"男":"女"))]),a("view",{staticClass:"right"},[a("image",{staticClass:"bq",attrs:{src:"../../static/home/gengduo_41.png",mode:""}})])])]),a("view",{staticClass:"item2"},[a("text",[e._v("个性签名")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.userinfo.spec_name,expression:"userinfo.spec_name"}],staticClass:"text",attrs:{type:"text",placeholder:e.userinfo.spec_name,eventid:"71d77020-5"},domProps:{value:e.userinfo.spec_name},on:{blur:function(t){e.specnameChange()},input:function(t){t.target.composing||(e.userinfo.spec_name=t.target.value)}}})])],1)},s=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s})}},[["aba1","common/runtime","common/vendor"]]]);