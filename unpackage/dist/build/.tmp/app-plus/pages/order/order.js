(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{1943:function(t,e,r){},2483:function(t,e,r){"use strict";r("971c");var n=i(r("b0ce")),o=i(r("9add"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},"6ba9":function(t,e,r){"use strict";var n=r("1943"),o=r.n(n);o.a},"9add":function(t,e,r){"use strict";r.r(e);var n=r("c5cb"),o=r("dae7");for(var i in o)"default"!==i&&function(t){r.d(e,t,function(){return o[t]})}(i);r("6ba9");var a=r("2877"),s=Object(a["a"])(o["default"],n["a"],n["b"],!1,null,"11472d9f",null);e["default"]=s.exports},c5cb:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("view",{staticClass:"content"},[r("view",{staticClass:"head",attrs:{"scroll-x":""}},[r("text",{class:{active:0==t.currentTab},attrs:{eventid:"3db026e0-0"},on:{click:function(e){t.tabs(0,"")}}},[t._v("全部")]),r("text",{class:{active:1==t.currentTab},attrs:{eventid:"3db026e0-1"},on:{click:function(e){t.tabs(1,0)}}},[t._v("待确认")]),r("text",{class:{active:2==t.currentTab},attrs:{eventid:"3db026e0-2"},on:{click:function(e){t.tabs(2,1)}}},[t._v("待收货")]),r("text",{class:{active:4==t.currentTab},attrs:{eventid:"3db026e0-3"},on:{click:function(e){t.tabs(4,3)}}},[t._v("待评价")]),r("text",{class:{active:3==t.currentTab},attrs:{eventid:"3db026e0-4"},on:{click:function(e){t.tabs(3,4)}}},[t._v("已完成")])]),t._l(t.orderList,function(e,n){return r("view",{key:n,staticClass:"item"},[r("image",{attrs:{src:t.imgURl+e.product.imgList[0],mode:"",eventid:"3db026e0-5-"+n},on:{click:function(r){t.gotoDetail(e.detailId)}}}),r("view",{staticClass:"msg"},[r("view",{staticClass:"title"},[r("text",[t._v(t._s(e.product.productName))]),r("text",[t._v("￥"+t._s(e.prescriptionPrice)+"元")])]),r("text",{staticClass:"msg_2"},[t._v(t._s(e.updatedTime))]),r("view",{staticClass:"btn"},[1==e.orderStatus||2==e.orderStatus?r("text",{attrs:{eventid:"3db026e0-6-"+n},on:{click:function(r){t.gotoDetail(e.detailId)}}},[t._v("查看订单")]):t._e(),3==e.orderStatus&&4!=e.orderStatus?r("text",{staticClass:"pingjia",attrs:{eventid:"3db026e0-7-"+n},on:{click:function(r){t.gotoComment(e)}}},[t._v("立即评价")]):t._e(),-3==e.orderStatus?r("text",[t._v("订单已取消")]):t._e(),0==e.orderStatus?r("text",{attrs:{eventid:"3db026e0-8-"+n},on:{click:function(r){t.cancelOrder(e.detailId)}}},[t._v("取消订单")]):t._e(),0==e.orderStatus?r("text",{staticClass:"pingjia",attrs:{eventid:"3db026e0-9-"+n},on:{click:function(r){t.ConfirmOrder(e.detailId)}}},[t._v("确认订单")]):t._e(),1==e.orderStatus||2==e.orderStatus?r("text",{attrs:{eventid:"3db026e0-10-"+n},on:{click:function(r){t.qRshouhuo(e.detailId,e.orderStatus)}}},[t._v(t._s(2==e.orderStatus?"确认收货":"商家确认中"))]):t._e(),3==e.orderStatus||4==e.orderStatus?r("text",{attrs:{eventid:"3db026e0-11-"+n},on:{click:function(e){t.shouHou()}}},[t._v("申请售后")]):t._e()])])])})],2)},o=[];r.d(e,"a",function(){return n}),r.d(e,"b",function(){return o})},d402:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r("2f62"),o=r("cb97"),i=r("d931");function a(t){return u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function u(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){l(t,e,r[e])})}return t}function l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={data:function(){return{currentTab:0,imgURl:"",orderList:[],state:"",pageNo:1}},onLoad:function(){this.imgURl=o.imgURl,this.queryOrderList(this.userId,this.state,this.pageNo,10)},onReachBottom:function(){this.pageNo++,this.queryOrderList(this.userId,this.state,this.pageNo,10)},computed:d({},(0,n.mapState)(["userId"])),methods:{queryOrderList:function(e,r,n,o){var s=this;(0,i.queryOrderList)(e,r,n,o).then(function(e){0==e.data.code&&(0==e.data.data.list.length&&t.showToast({title:"没有更多数据了",icon:"none",duration:1e3}),s.orderList=[].concat(a(s.orderList),a(e.data.data.list)))})},tabs:function(t,e){this.currentTab=t,this.state=e,this.orderList=[],this.pageNo=1,this.queryOrderList(this.userId,this.state,this.pageNo,10)},cancelOrder:function(t){var e=this;(0,i.cancelOrder)(t).then(function(t){0==t.data.code&&(e.orderList=[],e.pageNo=1,e.queryOrderList(e.userId,e.state,e.pageNo,10))})},ConfirmOrder:function(e){var r=this;(0,i.ConfirmOrder)(e,1).then(function(e){0==e.data.code&&(t.showToast({title:"订单已确认",icon:"none",duration:1500}),r.orderList=[],r.pageNo=1,r.queryOrderList(r.userId,r.state,r.pageNo,10))})},qRshouhuo:function(e,r){var n=this;console.log(22222),2==r?(0,i.ConfirmOrder)(e,3).then(function(e){0==e.data.code&&(t.showToast({title:"订单已确认",icon:"none",duration:1500}),n.orderList=[],n.pageNo=1,n.queryOrderList(n.userId,n.state,n.pageNo,10))}):t.showToast({title:"等待商家确认",icon:"none",duration:1500})},gotoDetail:function(e){t.navigateTo({url:"/pages/orderDetail/orderDetail?id="+e})},gotoComment:function(e){var r={orderId:e.orderId,productId:e.product.productId,productName:e.product.productName,descript:e.product.descript,img:e.product.imgList[0]};t.navigateTo({url:"/pages/comment/comment?params="+JSON.stringify(r)})},shouHou:function(){t.navigateTo({url:"/pages/shouHou/shouHou"})}}};e.default=f}).call(this,r("6e42")["default"])},dae7:function(t,e,r){"use strict";r.r(e);var n=r("d402"),o=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,function(){return n[t]})}(i);e["default"]=o.a}},[["2483","common/runtime","common/vendor"]]]);